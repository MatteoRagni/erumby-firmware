<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>eRumby-Firmware: esc_t Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">eRumby-Firmware
   &#160;<span id="projectnumber">1.0.0-beta</span>
   </div>
   <div id="projectbrief">Firmware for the eRumby low level microcontroller</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classesc__t.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-methods">Private Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classesc__t-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">esc_t Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Class for the ESC (Electronic speed controller)  
 <a href="classesc__t.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a4b83e017ed938f63df070c2058eba703"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#a4b83e017ed938f63df070c2058eba703">esc_t</a> (<a class="el" href="classerumby__base__t.html">erumby_base_t</a> *m_)</td></tr>
<tr class="memdesc:a4b83e017ed938f63df070c2058eba703"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the esc object.  <a href="#a4b83e017ed938f63df070c2058eba703">More...</a><br /></td></tr>
<tr class="separator:a4b83e017ed938f63df070c2058eba703"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae64e17833907ebe670a8bc1d6b6eaa3e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#ae64e17833907ebe670a8bc1d6b6eaa3e">set</a> (<a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a> v)</td></tr>
<tr class="memdesc:ae64e17833907ebe670a8bc1d6b6eaa3e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts a queued value for PWM in the class.  <a href="#ae64e17833907ebe670a8bc1d6b6eaa3e">More...</a><br /></td></tr>
<tr class="separator:ae64e17833907ebe670a8bc1d6b6eaa3e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8b29b63f91c4a77635caf8c74853bebd"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#a8b29b63f91c4a77635caf8c74853bebd">ctrl</a> (float v)</td></tr>
<tr class="memdesc:a8b29b63f91c4a77635caf8c74853bebd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Puts a [0,1] control value in queue.  <a href="#a8b29b63f91c4a77635caf8c74853bebd">More...</a><br /></td></tr>
<tr class="separator:a8b29b63f91c4a77635caf8c74853bebd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab03daa05e9be0391d9737797d37e6e4d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#ab03daa05e9be0391d9737797d37e6e4d">loop</a> ()</td></tr>
<tr class="memdesc:ab03daa05e9be0391d9737797d37e6e4d"><td class="mdescLeft">&#160;</td><td class="mdescRight">ESC main loop of execution.  <a href="#ab03daa05e9be0391d9737797d37e6e4d">More...</a><br /></td></tr>
<tr class="separator:ab03daa05e9be0391d9737797d37e6e4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a198d807060f3dc13430d89081116c37d"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#a198d807060f3dc13430d89081116c37d">stop</a> ()</td></tr>
<tr class="separator:a198d807060f3dc13430d89081116c37d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4e440a4281e7a252f4e364469769ef3"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#aa4e440a4281e7a252f4e364469769ef3">get</a> () const</td></tr>
<tr class="memdesc:aa4e440a4281e7a252f4e364469769ef3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the value currently on the PWM pin.  <a href="#aa4e440a4281e7a252f4e364469769ef3">More...</a><br /></td></tr>
<tr class="separator:aa4e440a4281e7a252f4e364469769ef3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6ba2b2c8a06aa29fa7fdccebfaf02e84"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#a6ba2b2c8a06aa29fa7fdccebfaf02e84">get_min</a> () const</td></tr>
<tr class="memdesc:a6ba2b2c8a06aa29fa7fdccebfaf02e84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns minimum PWM value possible.  <a href="#a6ba2b2c8a06aa29fa7fdccebfaf02e84">More...</a><br /></td></tr>
<tr class="separator:a6ba2b2c8a06aa29fa7fdccebfaf02e84"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fd0abbe511fe9e29010d0a8fc00fce1"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#a6fd0abbe511fe9e29010d0a8fc00fce1">get_max</a> () const</td></tr>
<tr class="memdesc:a6fd0abbe511fe9e29010d0a8fc00fce1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns maximum PWM value possible.  <a href="#a6fd0abbe511fe9e29010d0a8fc00fce1">More...</a><br /></td></tr>
<tr class="separator:a6fd0abbe511fe9e29010d0a8fc00fce1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acea52f8e11f4b2c0a69ed380fc1daad6"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#acea52f8e11f4b2c0a69ed380fc1daad6">get_idle</a> () const</td></tr>
<tr class="memdesc:acea52f8e11f4b2c0a69ed380fc1daad6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the idle PWM value.  <a href="#acea52f8e11f4b2c0a69ed380fc1daad6">More...</a><br /></td></tr>
<tr class="separator:acea52f8e11f4b2c0a69ed380fc1daad6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-methods"></a>
Private Member Functions</h2></td></tr>
<tr class="memitem:aad7fa2b883c135adf2f57ef00a361f84"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#aad7fa2b883c135adf2f57ef00a361f84">input_check</a> (<a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a> v)</td></tr>
<tr class="memdesc:aad7fa2b883c135adf2f57ef00a361f84"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check the user input. If in remote may raise the alarm.  <a href="#aad7fa2b883c135adf2f57ef00a361f84">More...</a><br /></td></tr>
<tr class="separator:aad7fa2b883c135adf2f57ef00a361f84"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:aa958fd5cccca98fbd5aa8ebf949d4a73"><td class="memItemLeft" align="right" valign="top">const <a class="el" href="types_8hpp.html#aede467d93ddeb5fdeff6023236aa4ad6">pin_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#aa958fd5cccca98fbd5aa8ebf949d4a73">pin</a></td></tr>
<tr class="separator:aa958fd5cccca98fbd5aa8ebf949d4a73"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a74a57e35aa950675992e6341bc2f2b42"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#a74a57e35aa950675992e6341bc2f2b42">value</a></td></tr>
<tr class="separator:a74a57e35aa950675992e6341bc2f2b42"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adfaa3753fb8ce7ee23e543ff5ad79fe0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#adfaa3753fb8ce7ee23e543ff5ad79fe0">queued_value</a></td></tr>
<tr class="separator:adfaa3753fb8ce7ee23e543ff5ad79fe0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6c7ab4d77605b8f6daae9871efce578a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classerumby__base__t.html">erumby_base_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#a6c7ab4d77605b8f6daae9871efce578a">m</a></td></tr>
<tr class="separator:a6c7ab4d77605b8f6daae9871efce578a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a835f4793038749c210381907c438f8b8"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classlookup__table__t.html">lookup_table_t</a>&lt; float, 2 &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classesc__t.html#a835f4793038749c210381907c438f8b8">map</a></td></tr>
<tr class="separator:a835f4793038749c210381907c438f8b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Class for the ESC (Electronic speed controller) </p>
<p>The class implements the software representation of the Electronic Speed Controller of the car. It takes a PWM as input and sets a voltage on the motor input in order to get movement. The ESC class also implements some security features such raising an alarm when the input is out the boundaries. </p>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00031">31</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a4b83e017ed938f63df070c2058eba703"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b83e017ed938f63df070c2058eba703">&#9670;&nbsp;</a></span>esc_t()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">esc_t::esc_t </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="classerumby__base__t.html">erumby_base_t</a> *&#160;</td>
          <td class="paramname"><em>m_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor for the esc object. </p>
<p>The esc object initializes the value for the ESC PWM and sets the erumby instance pointer. The constructor also initializes the frequency of the PWM pin for the esc. In order to set the frequency, the timers should be initialized by the <code>e_rumby</code> constructor.</p>
<p>At the end of the constructor the <code>stop</code> is called in order to be sure to write immediately on the PWM the idle values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">m_</td><td>pointer to the main instance of <code>erumby_y</code> </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00072">72</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="aad7fa2b883c135adf2f57ef00a361f84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aad7fa2b883c135adf2f57ef00a361f84">&#9670;&nbsp;</a></span>input_check()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a> esc_t::input_check </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check the user input. If in remote may raise the alarm. </p>
<p>The function limits the input between the boundaries of the duty cycle of the esc (<code>DUTY_ESC_MIN</code>, <code>DUTY_ESC_MAX</code>). If the machine is in remote mode, then the <code><a class="el" href="classerumby__t.html#a7783e7c5a559e386b2ae7eebc8ed86f5" title="alarm function for error debuging set the led of port 13 blinking, With serial monitor is possible to...">erumby_t::alarm</a></code> will be called for an input out of bounds.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>the user input to be checked </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>the value of PWM that will be set </dd></dl>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00048">48</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="ae64e17833907ebe670a8bc1d6b6eaa3e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae64e17833907ebe670a8bc1d6b6eaa3e">&#9670;&nbsp;</a></span>set()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void esc_t::set </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a>&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Puts a queued value for PWM in the class. </p>
<p>The method allows the user to request a new value for the PWM. The value will be written to the motor once the esc executes a loop. This means that the writes on ESC is queued to the next iteration. To be clear:</p><ol type="1">
<li>the user calls <code>set</code> with a value of PWM, the value is in the queue</li>
<li>the machine continues with its loop, calling all devices loop</li>
<li>When the esc loop is called, if the queued value is different from the current value, the queued value is written on PWM. To be noted: if the user requires two value <b>before</b> at least one loop is executed, the first value will be never exported to the PWM pin (it means that the two request are faster than a single machine loop). This allows to send the command even in an Interrupt Service Routine, or in a communication routine keeping the code execution deterministic.</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>the user value to be queued </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00099">99</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="a8b29b63f91c4a77635caf8c74853bebd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8b29b63f91c4a77635caf8c74853bebd">&#9670;&nbsp;</a></span>ctrl()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void esc_t::ctrl </td>
          <td>(</td>
          <td class="paramtype">float&#160;</td>
          <td class="paramname"><em>v</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Puts a [0,1] control value in queue. </p>
<p>The method allows the user to request a new value for the PWM with a float value from 0 to 1. The value will be written to the motor once the esc executes a loop. This means that the writes on ESC is queued to the next iteration. The function saturates. To be clear:</p><ol type="1">
<li>the user calls <code>ctrl</code> with a value in [0, 1], the value is in the queue</li>
<li>the machine continues with its loop, calling all devices loop</li>
<li>When the esc loop is called, if the queued value is different from the current value, the queued value is written on PWM. To be noted: if the user requires two value <b>before</b> at least one loop is executed, the first value will be never exported to the PWM pin (it means that the two request are faster than a single machine loop). This allows to send the command even in an Interrupt Service Routine, or in a communication routine keeping the code execution deterministic.</li>
</ol>
<p>The input is mapped using a lookup table that is defined as:</p>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone">Input Value  </th><th class="markdownTableHeadNone">Output Value   </th></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&lt; 0  </td><td class="markdownTableBodyNone"><code>DUTY_CYCLE_IDLE</code>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">= 0  </td><td class="markdownTableBodyNone"><code>DUTY_CYCLE_IDLE</code>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">in (0, 1)  </td><td class="markdownTableBodyNone">(linear mapping and rounding to nearest integer)   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowEven">
<td class="markdownTableBodyNone">= 1  </td><td class="markdownTableBodyNone"><code>DUTY_CYCLE_MAX</code>   </td></tr>
<tr class="markdownTableBody" class="markdownTableRowOdd">
<td class="markdownTableBodyNone">&gt; 1  </td><td class="markdownTableBodyNone"><code>DUTY_CYCLE_MAX</code>   </td></tr>
</table>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">v</td><td>the user value to be queued </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00131">131</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="ab03daa05e9be0391d9737797d37e6e4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab03daa05e9be0391d9737797d37e6e4d">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void esc_t::loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>ESC main loop of execution. </p>
<p>This function must be called inside the <code><a class="el" href="classerumby__t.html#a2567c659113289cb9d1c0dec0e8d6205" title="Main loop for erumby. ">erumby_t::loop</a></code> and it is the main loop for the ESC. When value is different than the queued value, the queud value is written to the ESC and stored as the current value.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="classesc__t.html#ae64e17833907ebe670a8bc1d6b6eaa3e" title="Puts a queued value for PWM in the class. ">set</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00144">144</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="a198d807060f3dc13430d89081116c37d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a198d807060f3dc13430d89081116c37d">&#9670;&nbsp;</a></span>stop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void esc_t::stop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Normal stop</p>
<p>The normal stop puts the idle value in the queue in order to arrest motor immediately </p>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00156">156</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="aa4e440a4281e7a252f4e364469769ef3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4e440a4281e7a252f4e364469769ef3">&#9670;&nbsp;</a></span>get()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a> esc_t::get </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the value currently on the PWM pin. </p>
<dl class="section return"><dt>Returns</dt><dd>the value that is currently wirtten in pwm </dd></dl>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00166">166</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="a6ba2b2c8a06aa29fa7fdccebfaf02e84"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6ba2b2c8a06aa29fa7fdccebfaf02e84">&#9670;&nbsp;</a></span>get_min()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a> esc_t::get_min </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns minimum PWM value possible. </p>
<dl class="section return"><dt>Returns</dt><dd>the minim value for the ESC that it is possible to write </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="configurations_8hpp.html#a59ab845c181070d05ccdde38b6803969">DUTY_ESC_MIN</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00172">172</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="a6fd0abbe511fe9e29010d0a8fc00fce1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fd0abbe511fe9e29010d0a8fc00fce1">&#9670;&nbsp;</a></span>get_max()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a> esc_t::get_max </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns maximum PWM value possible. </p>
<dl class="section return"><dt>Returns</dt><dd>the maximum value it is possible to write </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="configurations_8hpp.html#a59ab845c181070d05ccdde38b6803969">DUTY_ESC_MIN</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00178">178</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="acea52f8e11f4b2c0a69ed380fc1daad6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#acea52f8e11f4b2c0a69ed380fc1daad6">&#9670;&nbsp;</a></span>get_idle()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a> esc_t::get_idle </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the idle PWM value. </p>
<dl class="section return"><dt>Returns</dt><dd>the PWM value that stops the motor </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="configurations_8hpp.html#a8dbfbd69ffd8717a63a55bcf22747b54">DUTY_ESC_IDLE</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00184">184</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="aa958fd5cccca98fbd5aa8ebf949d4a73"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa958fd5cccca98fbd5aa8ebf949d4a73">&#9670;&nbsp;</a></span>pin</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const <a class="el" href="types_8hpp.html#aede467d93ddeb5fdeff6023236aa4ad6">pin_t</a> esc_t::pin</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pin for the ESC, this is specified in <code><a class="el" href="configurations_8hpp.html">configurations.hpp</a></code> </p>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00032">32</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="a74a57e35aa950675992e6341bc2f2b42"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a74a57e35aa950675992e6341bc2f2b42">&#9670;&nbsp;</a></span>value</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a> esc_t::value</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>PWM value that is currently on PWM </p>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00033">33</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="adfaa3753fb8ce7ee23e543ff5ad79fe0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adfaa3753fb8ce7ee23e543ff5ad79fe0">&#9670;&nbsp;</a></span>queued_value</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8hpp.html#acb22f4d8d582661cf61a532ee71418ce">cmd_t</a> esc_t::queued_value</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>PWM requested by the user </p>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00034">34</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="a6c7ab4d77605b8f6daae9871efce578a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6c7ab4d77605b8f6daae9871efce578a">&#9670;&nbsp;</a></span>m</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classerumby__base__t.html">erumby_base_t</a>* esc_t::m</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Pointer to erumby main instance </p>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00035">35</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<a id="a835f4793038749c210381907c438f8b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a835f4793038749c210381907c438f8b8">&#9670;&nbsp;</a></span>map</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classlookup__table__t.html">lookup_table_t</a>&lt;float, 2&gt; esc_t::map</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Map from [0, 1] to [idle, max] </p>

<p class="definition">Definition at line <a class="el" href="esc__t_8hpp_source.html#l00036">36</a> of file <a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="esc__t_8hpp_source.html">esc_t.hpp</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="classesc__t.html">esc_t</a></li>
    <li class="footer">Generated on Fri Nov 16 2018 13:50:06 for eRumby-Firmware by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>

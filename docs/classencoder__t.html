<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>eRumby-Firmware: encoder_t Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">eRumby-Firmware
   &#160;<span id="projectnumber">1.0.0-beta</span>
   </div>
   <div id="projectbrief">Firmware for the eRumby low level microcontroller</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pri-attribs">Private Attributes</a> &#124;
<a href="classencoder__t-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">encoder_t Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:a533f40e8b5511b85e6efa2dfdda390c3"><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#a533f40e8b5511b85e6efa2dfdda390c3">encoder_t</a> (<a class="el" href="types_8hpp.html#aede467d93ddeb5fdeff6023236aa4ad6">pin_t</a> pin_)</td></tr>
<tr class="memdesc:a533f40e8b5511b85e6efa2dfdda390c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Constructor for the esc object.  <a href="#a533f40e8b5511b85e6efa2dfdda390c3">More...</a><br /></td></tr>
<tr class="separator:a533f40e8b5511b85e6efa2dfdda390c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9ad00a9e80ead1a4a5afa6638de7915f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#a9ad00a9e80ead1a4a5afa6638de7915f">loop</a> ()</td></tr>
<tr class="memdesc:a9ad00a9e80ead1a4a5afa6638de7915f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Main loop to run for reading the encoders.  <a href="#a9ad00a9e80ead1a4a5afa6638de7915f">More...</a><br /></td></tr>
<tr class="separator:a9ad00a9e80ead1a4a5afa6638de7915f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3dd5599f626b1f70530e5b389375c634"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#a3dd5599f626b1f70530e5b389375c634">get_omega</a> () const</td></tr>
<tr class="memdesc:a3dd5599f626b1f70530e5b389375c634"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the wheel speed (estimation of the high gain observer)  <a href="#a3dd5599f626b1f70530e5b389375c634">More...</a><br /></td></tr>
<tr class="separator:a3dd5599f626b1f70530e5b389375c634"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa833668fba5dd5bef0d4bd6f5c04de1e"><td class="memItemLeft" align="right" valign="top">const float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#aa833668fba5dd5bef0d4bd6f5c04de1e">get_theta</a> () const</td></tr>
<tr class="memdesc:aa833668fba5dd5bef0d4bd6f5c04de1e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Returns the current angle of the wheel (raw value)  <a href="#aa833668fba5dd5bef0d4bd6f5c04de1e">More...</a><br /></td></tr>
<tr class="separator:aa833668fba5dd5bef0d4bd6f5c04de1e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a981a22829b3cd18fa614e76e978afaf0"><td class="memItemLeft" align="right" valign="top"><a id="a981a22829b3cd18fa614e76e978afaf0"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#a981a22829b3cd18fa614e76e978afaf0">stop</a> ()</td></tr>
<tr class="memdesc:a981a22829b3cd18fa614e76e978afaf0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Resets the state of the encoder (use for mode change) <br /></td></tr>
<tr class="separator:a981a22829b3cd18fa614e76e978afaf0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pri-attribs"></a>
Private Attributes</h2></td></tr>
<tr class="memitem:ae460c9f9a807275ec47206db6b949fef"><td class="memItemLeft" align="right" valign="top"><a class="el" href="types_8hpp.html#aba03c86a55b789b2ca5253cab49cf585">counter_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#ae460c9f9a807275ec47206db6b949fef">counter</a></td></tr>
<tr class="separator:ae460c9f9a807275ec47206db6b949fef"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae974a0f7cc4cc0578f10851059c9f20a"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classpwm__reader__t.html">pwm_reader_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#ae974a0f7cc4cc0578f10851059c9f20a">pwm</a></td></tr>
<tr class="separator:ae974a0f7cc4cc0578f10851059c9f20a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a44a51bc0830628b16014da3ca79457b7"><td class="memItemLeft" align="right" valign="top"><a class="el" href="classhigh__gain__obs2__t.html">high_gain_obs2_t</a>&lt; <a class="el" href="configurations_8hpp.html#ae73518372704d184f3082009d5e40f09">LOOP_TIMING</a> &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#a44a51bc0830628b16014da3ca79457b7">hg</a></td></tr>
<tr class="separator:a44a51bc0830628b16014da3ca79457b7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1a76ca800ab0b9c5d2473292fe24f90d"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#a1a76ca800ab0b9c5d2473292fe24f90d">theta</a></td></tr>
<tr class="separator:a1a76ca800ab0b9c5d2473292fe24f90d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad212960e831bef9d40139a47dc94fd24"><td class="memItemLeft" align="right" valign="top">float&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classencoder__t.html#ad212960e831bef9d40139a47dc94fd24">omega</a></td></tr>
<tr class="separator:ad212960e831bef9d40139a47dc94fd24"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>/brief Class for the Encoder sensors</p>
<p>The class implements the software representation of the Encoder sensor of the car. It takes a PWM as input and calculate the angular velocity of the wheel. </p>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00031">31</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="a533f40e8b5511b85e6efa2dfdda390c3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a533f40e8b5511b85e6efa2dfdda390c3">&#9670;&nbsp;</a></span>encoder_t()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">encoder_t::encoder_t </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8hpp.html#aede467d93ddeb5fdeff6023236aa4ad6">pin_t</a>&#160;</td>
          <td class="paramname"><em>pin_</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Constructor for the esc object. </p>
<p>The esc object initializes the value for the ESC PWM and sets the erumby instance pointer. The constructor also initializes the frequency of the PWM pin for the esc. In order to set the frequency, the timers should be initialized by the <code>e_rumby::init_timers</code> function, which is called by the constructor.</p>
<p>At the end of the constructor the <code>alarm</code> is called in order to be sure to write immediately on the PWM the idle values.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pin_</td><td>value of the pin used for the encoder </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00057">57</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="a9ad00a9e80ead1a4a5afa6638de7915f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9ad00a9e80ead1a4a5afa6638de7915f">&#9670;&nbsp;</a></span>loop()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">void encoder_t::loop </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Main loop to run for reading the encoders. </p>
<p>The main loop runs the loop of the high gain observer, after reading the angle offset of the encoder (in terms of counts) </p>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00073">73</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>

</div>
</div>
<a id="a3dd5599f626b1f70530e5b389375c634"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3dd5599f626b1f70530e5b389375c634">&#9670;&nbsp;</a></span>get_omega()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const float encoder_t::get_omega </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the wheel speed (estimation of the high gain observer) </p>
<dl class="section return"><dt>Returns</dt><dd>the wheel speed </dd></dl>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00084">84</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>

</div>
</div>
<a id="aa833668fba5dd5bef0d4bd6f5c04de1e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa833668fba5dd5bef0d4bd6f5c04de1e">&#9670;&nbsp;</a></span>get_theta()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const float encoder_t::get_theta </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">inline</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Returns the current angle of the wheel (raw value) </p>
<dl class="section return"><dt>Returns</dt><dd>the current raw value of wheel angle </dd></dl>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00089">89</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>

</div>
</div>
<h2 class="groupheader">Member Data Documentation</h2>
<a id="ae460c9f9a807275ec47206db6b949fef"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae460c9f9a807275ec47206db6b949fef">&#9670;&nbsp;</a></span>counter</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8hpp.html#aba03c86a55b789b2ca5253cab49cf585">counter_t</a> encoder_t::counter</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>incremental counter of the encoder ppr </p>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00032">32</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>

</div>
</div>
<a id="ae974a0f7cc4cc0578f10851059c9f20a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae974a0f7cc4cc0578f10851059c9f20a">&#9670;&nbsp;</a></span>pwm</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classpwm__reader__t.html">pwm_reader_t</a> encoder_t::pwm</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>pwm object for reading the value of signal wave </p>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00033">33</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>

</div>
</div>
<a id="a44a51bc0830628b16014da3ca79457b7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a44a51bc0830628b16014da3ca79457b7">&#9670;&nbsp;</a></span>hg</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="classhigh__gain__obs2__t.html">high_gain_obs2_t</a>&lt; <a class="el" href="configurations_8hpp.html#ae73518372704d184f3082009d5e40f09">LOOP_TIMING</a> &gt; encoder_t::hg</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>High gain filter for encoder reading (order 3 since HG_L3 is defined) </p>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00037">37</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>

</div>
</div>
<a id="a1a76ca800ab0b9c5d2473292fe24f90d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1a76ca800ab0b9c5d2473292fe24f90d">&#9670;&nbsp;</a></span>theta</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float encoder_t::theta</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>Internal position for the wheel (direct read from the sensor) </p>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00039">39</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>

</div>
</div>
<a id="ad212960e831bef9d40139a47dc94fd24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad212960e831bef9d40139a47dc94fd24">&#9670;&nbsp;</a></span>omega</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">float encoder_t::omega</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">private</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">
<p>High gain estimation of the wheel speed </p>

<p class="definition">Definition at line <a class="el" href="encoder__t_8hpp_source.html#l00040">40</a> of file <a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li><a class="el" href="encoder__t_8hpp_source.html">encoder_t.hpp</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Nov 15 2018 17:21:27 for eRumby-Firmware by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>eRumby-Firmware: controller_t.hpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(initResizable);
/* @license-end */</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="header.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">eRumby-Firmware
   &#160;<span id="projectnumber">1.0.0-beta</span>
   </div>
   <div id="projectbrief">Firmware for the eRumby low level microcontroller</div>
  </td>
   <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('controller__t_8hpp.html','');});
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Classes</a> &#124;
<a href="#typedef-members">Typedefs</a>  </div>
  <div class="headertitle">
<div class="title">controller_t.hpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;Arduino.h&gt;</code><br />
<code>#include &quot;<a class="el" href="configurations_8hpp_source.html">configurations.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="cyclic__array__t_8hpp_source.html">cyclic_array_t.hpp</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="types_8hpp_source.html">types.hpp</a>&quot;</code><br />
</div>
<p><a href="controller__t_8hpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Classes</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classpi__ctrl__t.html">pi_ctrl_t&lt; MILLIS &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Class wich implements a PI controller.  <a href="classpi__ctrl__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classsmith__predictor__t.html">smith_predictor_t&lt; MILLIS, DELAY &gt;</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">Smith predictor.  <a href="classsmith__predictor__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontroller__t.html">controller_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">The actual ESC controller.  <a href="classcontroller__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcontroller__t_1_1esc__sp__t.html">controller_t::esc_sp_t</a></td></tr>
<tr class="memdesc:"><td class="mdescLeft">&#160;</td><td class="mdescRight">A specific Smith predictor with the ESC non linearity.  <a href="classcontroller__t_1_1esc__sp__t.html#details">More...</a><br /></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="typedef-members"></a>
Typedefs</h2></td></tr>
<tr class="memitem:a68fa5fb51e0e0b733978cd8d35f60ee0"><td class="memTemplParams" colspan="2">template&lt;timing_t MILLIS, timing_t DELAY&gt; </td></tr>
<tr class="memitem:a68fa5fb51e0e0b733978cd8d35f60ee0"><td class="memTemplItemLeft" align="right" valign="top">using&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="controller__t_8hpp.html#a68fa5fb51e0e0b733978cd8d35f60ee0">time_delay_t</a> = <a class="el" href="classcyclic__array__t.html">cyclic_array_t</a>&lt; float, DELAY/MILLIS &gt;</td></tr>
<tr class="memdesc:a68fa5fb51e0e0b733978cd8d35f60ee0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Dicretization of the time delay.  <a href="#a68fa5fb51e0e0b733978cd8d35f60ee0">More...</a><br /></td></tr>
<tr class="separator:a68fa5fb51e0e0b733978cd8d35f60ee0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><dl class="section author"><dt>Author</dt><dd>Matteo Ragni, Davide Piscini, Matteo Cocetti</dd></dl>
<p>The file contains the code employed in the ESC control. The ESC control receives a <code>float</code> with the reference for the wheel speed and try to set the PWM pulse witdh in order to obtain such value.</p>
<p>The scheme of the controller follows: </p>

<p class="definition">Definition in file <a class="el" href="controller__t_8hpp_source.html">controller_t.hpp</a>.</p>
</div><h2 class="groupheader">Typedef Documentation</h2>
<a id="a68fa5fb51e0e0b733978cd8d35f60ee0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a68fa5fb51e0e0b733978cd8d35f60ee0">&#9670;&nbsp;</a></span>time_delay_t</h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;timing_t MILLIS, timing_t DELAY&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">using <a class="el" href="controller__t_8hpp.html#a68fa5fb51e0e0b733978cd8d35f60ee0">time_delay_t</a> =  <a class="el" href="classcyclic__array__t.html">cyclic_array_t</a>&lt; float, DELAY / MILLIS &gt;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Dicretization of the time delay. </p>
<p>The time delay is a <code><a class="el" href="classcyclic__array__t.html" title="Cyclic array implementation. ">cyclic_array_t</a></code> that has a memory size which is \( n = \mathrm{floor}(d / t_s) \). The discretized system is:</p>
<p class="formulaDsp">
\begin{align} x_{1}^{k+1} &amp;= x_2^{k} \\ x_{2}^{k+1} &amp;= x_3^{k} \\ &amp; \vdots \\ x_{n-1}^{k+1} &amp;= x_n^{k} \\ x_n^{k+1} &amp;= u \end{align}
</p>
<p>Using templates for the creation of this kind of delay has an advantage in terms of code efficiency, but as drawback the delay is fixed at compile time. This also implies that the following should be respected.</p>
<p class="formulaDsp">
\[ \mathrm{mod}(d^{(ms)}, t_s^{(ms)}) = 0 \]
</p>
<dl class="tparams"><dt>Template Parameters</dt><dd>
  <table class="tparams">
    <tr><td class="paramname">MILLIS</td><td>discretization time in millisecond </td></tr>
    <tr><td class="paramname">DELAY</td><td>delay in milliseconds </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="controller__t_8hpp_source.html#l00209">209</a> of file <a class="el" href="controller__t_8hpp_source.html">controller_t.hpp</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="controller__t_8hpp.html">controller_t.hpp</a></li>
    <li class="footer">Generated on Fri Nov 16 2018 18:59:40 for eRumby-Firmware by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.14 </li>
  </ul>
</div>
</body>
</html>
